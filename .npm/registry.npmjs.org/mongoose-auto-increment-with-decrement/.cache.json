{"_id":"mongoose-auto-increment-with-decrement","_rev":"1-0a0d594e8ac460790ccd14d9f3097519","name":"mongoose-auto-increment-with-decrement","description":"This plugin allows you to auto-increment any field on any mongoose schema that you wish.","dist-tags":{"latest":"5.0.1"},"versions":{"5.0.1":{"name":"mongoose-auto-increment-with-decrement","version":"5.0.1","description":"This plugin allows you to auto-increment any field on any mongoose schema that you wish.","repository":{"type":"git","url":"git://github.com/Crysknight/mongoose-auto-increment.git"},"dependencies":{"extend":"^3.0.0"},"peerDependencies":{"mongoose":"^4.1.12"},"devDependencies":{"async":"*","chai":"*","mocha":"*","mongoose":"^4.1.12"},"keywords":["mongoose","plugin","auto-increment","auto","increment","automatic","autoincrement","auto_increment","autoinc","auto-inc","auto_inc","pureautoinc","mongoose-pureautoinc"],"author":{"name":"Alex Ford","email":"alex.ford@codetunnel.com","url":"Chevex"},"contributors":[{"name":"Nassor Paulino da Silva","email":"nassor@gmail.com","url":"rossan"},{"name":"Misha Koryak","email":"mkoryak@gmail.com","url":"mkoryak"},{"name":"Christopher Hiller","url":"boneskull"},{"name":"tomaskavka","url":"https://github.com/tomaskavka"}],"scripts":{"test":"node_modules/mocha/bin/mocha"},"bugs":{"url":"https://github.com/codetunnel/mongoose-auto-increment/issues"},"gitHead":"5692dca317c2e3cd54279289186488f9371eb143","homepage":"https://github.com/Crysknight/mongoose-auto-increment#readme","_id":"mongoose-auto-increment-with-decrement@5.0.1","_shasum":"a2460224f9cf22831ca84b2da71ee33d7a3e4bda","_from":".","_npmVersion":"3.10.10","_nodeVersion":"6.9.5","_npmUser":{"name":"crysknife","email":"ad.dolorem@yandex.ru"},"dist":{"shasum":"a2460224f9cf22831ca84b2da71ee33d7a3e4bda","tarball":"https://registry.npmjs.org/mongoose-auto-increment-with-decrement/-/mongoose-auto-increment-with-decrement-5.0.1.tgz"},"maintainers":[{"name":"crysknife","email":"ad.dolorem@yandex.ru"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/mongoose-auto-increment-with-decrement-5.0.1.tgz_1493672213188_0.40063945460133255"},"directories":{}}},"readme":"# mongoose-auto-increment\r\n\r\n[![Build Status](https://travis-ci.org/codetunnel/mongoose-auto-increment.png?branch=master)](https://travis-ci.org/codetunnel/mongoose-auto-increment)\r\n[![Dependencies Status](https://gemnasium.com/codetunnel/mongoose-auto-increment.png)](https://gemnasium.com/codetunnel/mongoose-auto-increment)\r\n[![NPM version](https://badge.fury.io/js/mongoose-auto-increment.png)](http://badge.fury.io/js/mongoose-auto-increment)\r\n\r\n> Mongoose plugin that auto-increments any ID field on your schema every time a document is saved.\r\n\r\n---\r\n\r\n> This is the module used by [mongoose-simpledb](https://github.com/codetunnel/mongoose-simpledb) to increment Number IDs. You are perfectly able to use this module by itself if you would like. However, if you're looking to make your life easier when using [mongoose](http://mongoosejs.com/) then I highly recommend you check out simpledb. It's a small wrapper around mongoose but it makes it extremely easy to deal with your models and draws a clear path for how to use mongoose in your application.\r\n\r\n## Getting Started\r\n\r\n> npm install mongoose-auto-increment\r\n\r\nOnce you have the plugin installed it is very simple to use. Just get reference to it, initialize it by passing in your\r\nmongoose connection and pass `autoIncrement.plugin` to the `plugin()` function on your schema.\r\n\r\n> Note: You only need to initialize MAI once.\r\n\r\n````js\r\nvar mongoose = require('mongoose'),\r\n    Schema = mongoose.Schema,\r\n    autoIncrement = require('mongoose-auto-increment');\r\n\r\nvar connection = mongoose.createConnection(\"mongodb://localhost/myDatabase\");\r\n\r\nautoIncrement.initialize(connection);\r\n\r\nvar bookSchema = new Schema({\r\n    author: { type: Schema.Types.ObjectId, ref: 'Author' },\r\n    title: String,\r\n    genre: String,\r\n    publishDate: Date\r\n});\r\n\r\nbookSchema.plugin(autoIncrement.plugin, 'Book');\r\nvar Book = connection.model('Book', bookSchema);\r\n````\r\n\r\nThat's it. Now you can create book entities at will and they will have an `_id` field added of type `Number` and will automatically increment with each new document. Even declaring references is easy, just remember to change the reference property's type to `Number` instead of `ObjectId` if the referenced model is also using the plugin.\r\n\r\n````js\r\nvar authorSchema = new mongoose.Schema({\r\n    name: String\r\n});\r\n    \r\nvar bookSchema = new Schema({\r\n    author: { type: Number, ref: 'Author' },\r\n    title: String,\r\n    genre: String,\r\n    publishDate: Date\r\n});\r\n    \r\nbookSchema.plugin(autoIncrement.plugin, 'Book');\r\nauthorSchema.plugin(autoIncrement.plugin, 'Author');\r\n````\r\n\r\n### Want a field other than `_id`?\r\n\r\n````js\r\nbookSchema.plugin(autoIncrement.plugin, { model: 'Book', field: 'bookId' });\r\n````\r\n\r\n### Want that field to start at a different number than zero or increment by more than one?\r\n\r\n````js\r\nbookSchema.plugin(autoIncrement.plugin, {\r\n    model: 'Book',\r\n    field: 'bookId',\r\n    startAt: 100,\r\n    incrementBy: 100\r\n});\r\n````\r\n\r\nYour first book document would have a `bookId` equal to `100`. Your second book document would have a `bookId` equal to `200`, and so on.\r\n\r\n### Want to know the next number coming up?\r\n\r\n````js\r\nvar Book = connection.model('Book', bookSchema);\r\nBook.nextCount(function(err, count) {\r\n\r\n    // count === 0 -> true\r\n\r\n    var book = new Book();\r\n    book.save(function(err) {\r\n\r\n        // book._id === 0 -> true\r\n\r\n        book.nextCount(function(err, count) {\r\n\r\n            // count === 1 -> true\r\n\r\n        });\r\n    });\r\n});\r\n````\r\n\r\nnextCount is both a static method on the model (`Book.nextCount(...)`) and an instance method on the document (`book.nextCount(...)`).\r\n\r\n### Want to reset counter back to the start value?\r\n\r\n````js\r\nbookSchema.plugin(autoIncrement.plugin, {\r\n    model: 'Book',\r\n    field: 'bookId',\r\n    startAt: 100\r\n});\r\n\r\nvar Book = connection.model('Book', bookSchema),\r\n    book = new Book();\r\n\r\nbook.save(function (err) {\r\n\r\n    // book._id === 100 -> true\r\n\r\n    book.nextCount(function(err, count) {\r\n\r\n        // count === 101 -> true\r\n\r\n        book.resetCount(function(err, nextCount) {\r\n\r\n            // nextCount === 100 -> true\r\n\r\n        });\r\n\r\n    });\r\n\r\n});\r\n````\r\n","maintainers":[{"name":"crysknife","email":"ad.dolorem@yandex.ru"}],"time":{"modified":"2017-05-01T20:56:55.057Z","created":"2017-05-01T20:56:55.057Z","5.0.1":"2017-05-01T20:56:55.057Z"},"homepage":"https://github.com/Crysknight/mongoose-auto-increment#readme","keywords":["mongoose","plugin","auto-increment","auto","increment","automatic","autoincrement","auto_increment","autoinc","auto-inc","auto_inc","pureautoinc","mongoose-pureautoinc"],"repository":{"type":"git","url":"git://github.com/Crysknight/mongoose-auto-increment.git"},"contributors":[{"name":"Nassor Paulino da Silva","email":"nassor@gmail.com","url":"rossan"},{"name":"Misha Koryak","email":"mkoryak@gmail.com","url":"mkoryak"},{"name":"Christopher Hiller","url":"boneskull"},{"name":"tomaskavka","url":"https://github.com/tomaskavka"}],"author":{"name":"Alex Ford","email":"alex.ford@codetunnel.com","url":"Chevex"},"bugs":{"url":"https://github.com/codetunnel/mongoose-auto-increment/issues"},"readmeFilename":"README.md","_attachments":{},"_etag":"W/\"5907a117-1ddf\"","_lastModified":"Mon, 01 May 2017 20:56:55 GMT","_cached":true}